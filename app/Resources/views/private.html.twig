{% extends "::base_private.html.twig" %}
{% block stylesheets %}
{% stylesheets
  '@MainBundle/Resources/public/css/prettyCheckable.css'
  '@MainBundle/Resources/public/css/bootstrapSwitch.css'
  '@MainBundle/Resources/public/css/datepicker.css'
  '@MainBundle/Resources/public/css/simple-slider.css'
  '@MainBundle/Resources/public/css/footable-0.1.css'
  '@MainBundle/Resources/public/css/footable.paginate.css'
  '@MainBundle/Resources/public/css/footable.sortable-0.1.css'
  '@MainBundle/Resources/public/css/select2.css'
  '@MainBundle/Resources/public/css/jquery-ui-1.8.21.custom.css'
  '@MainBundle/Resources/public/css/private.css'
  '@FOSCommentBundle/Resources/assets/css/comments.css'
  %}
  <link rel="stylesheet" href="{{ asset_url }}">
  {% endstylesheets %}
  {% endblock %}
  {% block body %}
  <div id="overlay">
     <ul>
      <li class="li1"></li>
      <li class="li2"></li>
      <li class="li3"></li>
      <li class="li4"></li>
      <li class="li5"></li>
      <li class="li6"></li>
    </ul>
  </div>
  <div class="progress-indicator">
   <img src="/img/icon_loading_75x75.gif" alt="loading" />
  </div>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="{{ path('homepage')}}"><span>TASKUL.NET</span></a>

        <!-- start: Header Menu -->
        <div class="nav-no-collapse header-nav">
          <ul class="nav pull-right">
            <li class="dropdown hidden-phone"><!-- Friend Request notifications -->
              <a class="btn dropdown-toggle notiftoggle" data-toggle="dropdown" href="#"  id="toggle-task-noti" data-context="FRIENDREQUEST" data-route="notification" data-route-content="get_notifications" rel="tooltip" title="{{ 'notification.FRIENDREQUEST.title'|trans({}, 'TimelineBundle') }}">
                <i class="icon-flag icon-white"></i><span class="label label-important hidden-phone notifnumber">0</span>
              </a>
              <ul class="dropdown-menu notifications">
              </ul>
            </li>
            <li class="dropdown hidden-phone"><!-- Task notifications -->
              <a class="btn dropdown-toggle notiftoggle" data-toggle="dropdown" href="#"  id="toggle-task-noti" data-context="TASK" data-route="notification" data-route-content="get_notifications" rel="tooltip" title="{{ 'notification.TASK.title'|trans({}, 'TimelineBundle') }}">
                <i class="icon-tasks icon-white"></i><span class="label label-important hidden-phone notifnumber">0</span>
              </a>
              <ul class="dropdown-menu notifications">
              </ul>
            </li>
            <!-- start: Pending task Dropdown -->
            <li class="dropdown hidden-phone">
              <a class="btn dropdown-toggle notiftoggle" data-toggle="dropdown" href="#" id="toggle-task-inprogress" data-context="inprogress" data-route="api_count_task_list_status" data-route-content="api_list_task_status" rel="tooltip" title="{{ 'notification.TASK.pending.title'|trans({}, 'TimelineBundle') }}">
                <i class="icon-fire icon-white"></i> <span class="label label-warning hidden-phone notifnumber" id="task-inprogress-number">0</span>
              </a>
              <ul class="dropdown-menu tasks-inprogress tasks">
              </ul>
            </li>
            <!-- end: Notifications Dropdown -->
            <!-- start: Message Dropdown -->
            <li class="dropdown hidden-phone">
              <a class="btn dropdown-toggle notiftoggle" data-toggle="dropdown" href="#" data-context="messages" data-route="taskul_message_unread_messages" data-route-content="taskul_message_list_unread_messages">
                <i class="icon-envelope icon-white"></i> <span class="label label-success hidden-phone notifnumber">0</span>
              </a>
              <ul class="dropdown-menu messages">
              </ul>
            </li>
            <!-- end: Message Dropdown -->
            <!-- start: User Dropdown -->
            <li class="dropdown">
              <a class="btn dropdown-toggle no-ajaxy" data-toggle="dropdown" href="#">
                <i class="icon-user icon-white"></i>
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a href="{{ path('sonata_user_profile_edit') }}" class="ajaxy"><i class="icon-user"></i> {{ 'user.profile'|trans({}, 'UserBundle') }}</a></li>
                <li><a href="{{ path('fos_user_change_password') }}" class="ajaxy"><i class="icon-user"></i> {{ 'user.password'|trans({}, 'UserBundle') }}</a></li>
                <li class="divider"></li>
                <li><a href="{{ path('fos_user_security_logout') }}"><i class="icon-off"></i> {{ 'user.logout'|trans({}, 'UserBundle') }}</a></li>
              </ul>
            </li>
            <!-- end: User Dropdown -->
            {% set routeName = app.request.attributes.get("_route") %}
            {% set routeParams = app.request.attributes.get("_route_params") %}
            {% for locale in locales %}
              {% if locale != app.request.locale %}
              <li><a href="{{ path(routeName, routeParams|merge({"_locale": locale})) }}">{{ locale }}</a></li>
              {% endif %}
            {% endfor %}
          </ul>
          <div class="pull-right hidden-phone" style="padding:10px 20px">{{app.user.username}}</div>
        </div>
        <!-- end: Header Menu -->

      </div>
    </div>
  </div>
  <!-- start: Header -->

  <div class="container-fluid">
    <div class="row-fluid">

      <!-- start: Main Menu -->
      <div class="span2 main-menu-span">
        <div style="height:100%">
        <div class="nav-collapse sidebar-nav collapse">
          {{ knp_menu_render('main', { 'currentClass': 'active'})  }}
        </div><!--/.well -->
        </div>
      </div><!--/span-->
      <!-- end: Main Menu -->

      <noscript>
        <div class="alert alert-block span10" style="z-index:1000000">
          <h4 class="alert-heading">Warning!</h4>
          <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a> enabled to use this site.</p>
        </div>
      </noscript>

      <div id="content" class="span10" style="min-height: 825px;">
        <!-- start: Content -->
        {% block content %}{% endblock %}
        <!-- end: Content -->
      </div><!--/#content.span10-->
    </div><!--/fluid-row-->

    <div class="clearfix"></div>

    <footer>
      <p>
        <span style="text-align:left;float:left">&copy; 2013 <a href="http://es.linkedin.com/pub/camilo-cota/24/918/b36" title="Linkedin Camilo Cota">Camilo Cota Aranda.</a> <span class="hidden-phone">All rights reserved.</span></span>
        <span style="text-align:right;float:right" class="hidden-phone">Powered by: <a href="http://symfony.com/" title="Symfony is a PHP framework for web projects">Symfony</a></span>
      </p>

    </footer>
  </div><!--/.fluid-container-->
  {% verbatim %}
  <script id="get_notifications-html" type="text/html">
  <li>
    <span class="dropdown-menu-title">{{message}}</span>
  </li>
  {{#result}}
    <li>
    <a href="{{ url }}" class="ajaxy notification-content" title="{{ title }}">
    + <i class="{{icon}}"></i> <span class="message">{{ msg }}</span> <span class="time">{{ time }}</span></a>
    </li>
    {{/result}}
  </script>
  <script id="api_list_task_status-html" type="text/html">
  <li>
    <span class="dropdown-menu-title">{{message}}</span>
  </li>
  {{#result}}
  <li>
    <a href="{{url}}" class="ajaxy notification-content" title="{{ title }}">
      <span class="header">
        <span class="title">{{summary}}</span>
        <span class="percent"></span>
      </span>
      <div class="taskProgress progressSlim progressYellow">{{percent}}</div>
    </a>
  </li>
  {{/result}}
  {{{viewall}}}
  </script>
  <script id="taskul_message_list_unread_messages-html" type="text/html">
  <li>
    <span class="dropdown-menu-title">{{ message }}</span>
  </li>
  {{#result}}
  <li>
    <a href="{{ url }}" class="ajaxy notification-content" title="{{ title }}">
      <span class="avatar">
      {{#sender.facebookId}}
        <img src="https://graph.facebook.com/{{ sender.facebookId }}/picture"/>
      {{/sender.facebookId}}
      {{^sender.facebookId}}
        <img src="http://www.gravatar.com/avatar/{{ sender.gravatar }}" />
      {{/sender.facebookId}}
      </span>
      <span class="header">
        <span class="from">
          {{ sender.firstname }}
        </span>
        <span class="time">
          {{ time }}
        </span>
      </span>
      <span class="message">
      {{#limitLength}}{{body}}{{/limitLength}}
      </span>
    </a>
  </li>
  {{/result}}
  </script>
  {% endverbatim %}
  {% endblock %}
  {% block javascripts %}
  {{ parent() }}
  <script type="text/javascript" src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<!--  <script type="text/javascript" src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script> -->
  {% javascripts
    'js/fos_js_routes.js'
    '@MainBundle/Resources/public/js/vendor/mustache.js'
    '@MainBundle/Resources/public/js/vendor/jquery.mustache.js'
    '@MainBundle/Resources/public/js/vendor/jquery-ui-1.10.2.custom.js'
    '@MainBundle/Resources/public/js/vendor/excanvas.js'
    '@MainBundle/Resources/public/js/vendor/jquery.knob.js'
    '@MainBundle/Resources/public/js/vendor/select2.js'
    '@MainBundle/Resources/public/js/vendor/nicEdit-latest.js'
    '@MainBundle/Resources/public/js/vendor/bootstrap-datepicker.js'
    '@MainBundle/Resources/public/js/vendor/simple-slider.js'
    '@MainBundle/Resources/public/js/vendor/jquery.ui.widget.js'
    '@MainBundle/Resources/public/js/vendor/jquery.iframe-transport.js'
    '@MainBundle/Resources/public/js/vendor/jquery.fileupload.js'
    '@MainBundle/Resources/public/js/vendor/footable.js'
    '@MainBundle/Resources/public/js/vendor/footable.filter.js'
    '@MainBundle/Resources/public/js/vendor/footable.paginate.js'
    '@MainBundle/Resources/public/js/vendor/footable.sortable.js'
    '@MainBundle/Resources/public/js/private.js'
  %}
  <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
  {% endblock %}