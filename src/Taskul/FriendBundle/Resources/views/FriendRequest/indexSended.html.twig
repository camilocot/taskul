{% extends app.request.isXmlHttpRequest ? "::base_ajax.html.twig" : "FriendBundle::layout/friendrequest.html.twig" %}
{% block content %}
{{ apy_breadcrumb_trail_render() }}

<div class="row-fluid sortable">
    <div class="box span12">
        <div class="box-header" data-original-title="Request Sended">
            <h2><i class="icon-user"></i><span class="break"></span>{{'friendrequest.sended.title'|trans({},'FriendBundle')}}</h2>
            <div class="box-icon">
                <a href="#" class="btn-minimize"><i class="icon-chevron-up"></i></a>
            </div>
        </div>
        <div class="box-content">
            {% if entities|length > 0 %}
            <div class="pull-right" id="filter-list">{{'search.title'|trans({},'MainBundle')}}: <input id="filter" type="text" autocomplete="off" /><a href="#clear" class="clear-filter btn" title="{{'friend.search_clean'|trans({},'FriendBundle')}}" rel="tooltip"><i class="fa-icon-trash"></i></a></div>
            <table class="table table-striped table-bordered bootstrap-datatable footable" id="list" data-filter="#filter">
                <thead>
                    <tr>
                        <th data-class="expand">{{'friendrequest.list.to'|trans({},'FriendBundle')}}</th>
                        <th data-hide="phone" data-sort-initial="true">{{'friendrequest.list.date_sended'|trans({},'FriendBundle')}}</th>
                        <th data-sort-ignore="true" data-hide="phone,tablet">{{'lists.actions'|trans({},'MainBundle')}}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entity in entities %}
                    <tr>
                        <td>
                            {% if entity.email is not none %}
                            <strong>{{ entity.email }}</strong>
                            {% else %}
                            {% if entity.addtionalData.fbdata.imgurl is defined %}
                            <img src="{{ entity.addtionalData.fbdata.imgurl }}" />&nbsp;<strong>{{ entity.addtionalData.fbdata.name }}</strong>
                            {% endif %}
                            {% endif %}
                        </td>
                        <td>{{entity.created|date("d/m/Y")}}</tD>
                        <td>
                            {% if is_granted('VIEW',entity) %}
                            <a href="{{ path('frequest_show', { 'id': entity.id }) }}" class="btn btn-info ajaxy" title="{{'friendrequest.list.buttons.show'|trans({},'FriendBundle')}}"><i class="fa-icon-eye-open icon-white"></i></a>
                            {% endif %}
                            {% if is_granted('DELETE',entity) %}
                            <button class="btn btn-danger delete-modal-btn modal-button" type="button" data-id="{{ entity.id }}" data-target="#deleteModal" data-toggle="modal" title="{{'friendrequest.list.buttons.delete'|trans({},'FriendBundle')}}"><i class="fa-icon-trash icon-white"></i></button>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot class="footable-pagination">
                    <tr>
                      <td colspan="5"><ul id="pagination" class="footable-nav" /></td>
                    </tr>
                  </tfoot>
            </table>
            {% endif %}
            {% include 'FriendBundle:partials:warning-message.html.twig' with {'type':'friendrequest'} %}
            <div class="well">
                <a class="btn btn-primary ajaxy" href="{{ path('frequest_new') }}">
                    <i class="fa-icon-envelope"></i>&nbsp;{{'friendrequest.list.buttons.new'|trans({},'FriendBundle')}}
                </a>
            </div>
        </div>
    </div>
</div>
{% include 'FriendBundle:partials:delete-modal.html.twig' with {'type': 'frequest_delete'} %}
{% endblock %}
{% block javascripts %}
{{ parent() }}
{% javascripts
'@FriendBundle/Resources/public/js/friendrequest/indexSended.js'
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}