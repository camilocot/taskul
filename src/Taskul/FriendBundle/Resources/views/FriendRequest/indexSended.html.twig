{% extends "FriendBundle::layout.html.twig" %}
    {% block body %}
    {{ parent() }}
    {% include 'FriendBundle:partials:delete-modal.html.twig' %}
    {% endblock %}
{% block content %}
<div class="row-fluid sortable">
    <div class="box span12">
        <div class="box-header" data-original-title>
            <h2><i class="icon-user"></i><span class="break"></span>Request Sended</h2>
            <div class="box-icon">
            <a href="#" class="btn-minimize"><i class="icon-chevron-up"></i></a>
            </div>
        </div>
        <div class="box-content">
{% if entities|length > 0 %}
<table class="table table-striped table-bordered bootstrap-datatable datatable" id="list">
    <thead>
        <tr>
            <th>Message</th>
            <th>Destinatarios</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for entity in entities %}
        <tr>
            <td><a href="{{ path('frequest_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>{{ entity.message }}</td>
            <td>
                {% if entity.email is not none %}
                {{ entity.email }}
                {% else %}
                {% if entity.addtionalData.fbdata.imgurl is defined %}
                <img src="{{ entity.addtionalData.fbdata.imgurl }}" />{{ entity.addtionalData.fbdata.name }}
                {% endif %}
                {% endif %}
            </td>
            <td>
                {% if is_granted('VIEW',entity) %}
                    <a href="{{ path('frequest_show', { 'id': entity.id }) }}" class="btn btn-success" title="edit"><i class="icon-edit icon-white"></i></a>
                {% endif %}
                {% if is_granted('DELETE',entity) %}
                    <button class="btn btn-danger delete-modal-btn" type="button" data-id="{{ entity.id }}" data-target="#deleteModal" data-toggle="modal"><i class="icon-trash icon-white"></i></button>
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-block ">
                            <h4 class="alert-heading">Warning!</h4>
                            <p>No hay ninguna invitaci√≥n enviada. Si quieres enviar invitaciones por email utiliza <a href="{{ path('frequest_new') }}">este formulario</a> o si quieres invitar a tus amigos de facebook utiliza <a href="{{ path('import_fb') }}">este otro formulario</a>.</p>
                        </div>
{% endif %}
</div>
</div>
</div>
{% endblock %}
{% block javascripts %}
{% if entities|length > 0 %}
<script src="//ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<script type="text/javascript" src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
{% javascripts
    '@MainBundle/Resources/public/js/datatables-boostrap.js'
    '@FriendBundle/Resources/public/js/friendRequestOps.js'
    %}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endif %}
{% endblock %}