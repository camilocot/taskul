{% extends app.request.isXmlHttpRequest ? "::base_ajax.html.twig" : "FriendBundle::layout/friendrequest.html.twig" %}
{% block content %}
{{ apy_breadcrumb_trail_render() }}
<div class="row-fluid sortable">
    <div class="box span12">
        <div class="box-header" data-original-title>
            <h2><i class="icon-user"></i><span class="break"></span>{{'friendrequest.recibed.title'|trans({},'FriendBundle')}}</h2>
            <div class="box-icon">
                <a href="#" class="btn-minimize"><i class="icon-chevron-up"></i></a>
            </div>
        </div>
        <div class="box-content">
          {% if entities|length > 0 %}
          <div class="pull-right" id="filter-list">{{'search.title'|trans({},'MainBundle')}}: <input id="filter" type="text" autocomplete="off" /><a href="#clear" class="clear-filter btn" title="{{'friend.search_clean'|trans({},'FriendBundle')}}" rel="tooltip"><i class="fa-icon-trash"></i></a></div>
            <table class="table table-striped table-bordered bootstrap-datatable footable" id="list" data-filter="#filter">
                <thead>
                    <tr>
                      <th data-class="expand">{{'friendrequest.list.from'|trans({},'FriendBundle')}}</th>
                      <th data-hide="phone" data-sort-initial="true">{{'friendrequest.list.date_recibed'|trans({},'FriendBundle')}}</th>
                      <th data-sort-ignore="true" data-hide="phone,tablet">{{'lists.actions'|trans({},'MainBundle')}}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entity in entities %}
                    <tr>
                      <td>{% include 'UserBundle:partials:user_avatar.html.twig' with {'user': entity.from } only %}
                        &nbsp;<strong>{{ entity.from }}</strong>
                      </td>
                      <td>{{ entity.created|date("d/m/Y") }}</td>
                      <td>
                         {% if is_granted('VIEW',entity) %}
                         <a href="{{ path('frequest_show', { 'id': entity.id }) }}" class="btn btn-info ajaxy" title="{{'friendrequest.list.buttons.show'|trans({},'FriendBundle')}}"><i class="fa-icon-eye-open icon-white"></i></a>
                         {% endif %}
                         {% if app.user == entity.to %}
                         <button type="button" class="btn btn-success modal-button" title="{{'friendrequest.list.buttons.activate'|trans({},'FriendBundle')}}" data-id="{{ entity.id }}" data-target="#activateModal" data-toggle="modal"><i class="fa-icon-ok icon-white"></i></button>
                         {% endif %}

                         {% if is_granted('DELETE',entity) %}
                         <button class="btn btn-danger modal-button" type="button" title="{{'friendrequest.list.buttons.delete'|trans({},'FriendBundle')}}" data-id="{{ entity.id }}" data-target="#deleteModal" data-toggle="modal"><i class="fa-icon-trash icon-white"></i></button>
                         {% endif %}
                     </td>

                   </tr>
                   {% endfor %}
               </tbody>
               <tfoot class="footable-pagination">
                    <tr>
                      <td colspan="5"><ul id="pagination" class="footable-nav" /></td>
                    </tr>
                  </tfoot>
           </table>
           {% endif %}
           {% include 'FriendBundle:partials:warning-message.html.twig' with {'type':'friendrequest'} %}
            <div class="well">
                <a class="btn btn-primary ajaxy" href="{{ path('frequest_new') }}">
                    <i class="fa-icon-envelope"></i>&nbsp;{{'friendrequest.list.buttons.new'|trans({},'FriendBundle')}}
                </a>
            </div>
    </div>
</div>
</div>
{% endblock %}
{% block javascripts %}
{{ parent() }}
{% javascripts
'@FriendBundle/Resources/public/js/friendrequest/indexRecibed.js'
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}