{% extends app.request.isXmlHttpRequest ? "::base_ajax.html.twig" : "FriendBundle::layout/friendrequest.html.twig" %}
{% block content %}
{{ apy_breadcrumb_trail_render() }}

<div class="row-fluid sortable">
    <div class="box span12">
        <div class="box-header" data-original-title>
            <h2><i class="icon-user"></i><span class="break"></span>Request Recibed</h2>
            <div class="box-icon">
                <a href="#" class="btn-minimize"><i class="icon-chevron-up"></i></a>
            </div>
        </div>
        <div class="box-content">
            {% if entities|length > 0 %}
          <div class="pull-right" id="filter-list">Search: <input id="filter" type="text" autocomplete="off" /> e.g. jun, elec, 1981 <a href="#clear" class="clear-filter" title="clear filter">X</a></div>
            <table class="table table-striped table-bordered bootstrap-datatable footable" id="list" data-filter="#filter">
                <thead>
                    <tr>
                      <th data-class="expand" data-sort-initial="true">From</th>
                      <th data-hide="phone,tablet">Message</th>
                      <th data-sort-ignore="true" data-hide="phone,tablet">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entity in entities %}
                    <tr>
                      <td>{{ entity.from }}</td>
                      <td>{{ entity.message }}</td>
                      <td>
                         {% if is_granted('VIEW',entity) %}
                         <a href="{{ path('frequest_show', { 'id': entity.id }) }}" class="btn btn-info ajaxy" title="View"><i class="fa-icon-eye-open icon-white"></i></a>
                         {% endif %}
                         {% if app.user == entity.to %}
                         <button type="button" class="btn btn-success modal-button" title="activate" data-id="{{ entity.id }}" data-target="#activateModal" data-toggle="modal"><i class="fa-icon-ok icon-white"></i></button>
                         {% endif %}

                         {% if is_granted('DELETE',entity) %}
                         <button class="btn btn-danger modal-button" type="button" data-id="{{ entity.id }}" data-target="#deleteModal" data-toggle="modal"><i class="fa-icon-trash icon-white"></i></button>
                         {% endif %}
                     </td>

                   </tr>
                   {% endfor %}
               </tbody>
               <tfoot class="footable-pagination">
                    <tr>
                      <td colspan="5"><ul id="pagination" class="footable-nav" /></td>
                    </tr>
                  </tfoot>
           </table>
           {% endif %}
           {% include 'FriendBundle:partials:warning-message-request.html.twig' %}
    </div>
</div>
</div>
{% endblock %}
{% block javascripts %}
{{ parent() }}
{% javascripts
'@FriendBundle/Resources/public/js/friendsfootable.js'
'@FriendBundle/Resources/public/js/friendrequest/indexRecibed.js'
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}