{% extends "TaskBundle::layout.html.twig" %}
{% block stylesheets %}
{{ parent() }}
{% stylesheets
    '@MainBundle/Resources/public/css/jquery.fileupload-ui.css'
    '@MainBundle/Resources/public/css/jasny-bootstrap.css'
    '@MainBundle/Resources/public/css/jasny-bootstrap-responsive.css'
    %}
    <link rel="stylesheet" href="{{ asset_url }}">
    {% endstylesheets %}
    {% endblock %}
        {% block body %}
    {% include 'TaskBundle:partials:delete-modal.html.twig' %}
    {{ parent() }}
    {% endblock %}
    {% block content %}


    {% include "TaskBundle:Upload:templates.html.twig" %}
    {{ apy_breadcrumb_trail_render() }}
    <div class="row-fluid sortable">
        <div class="box span12">
            <div class="box-header" data-original-title>
                <h2><i class="icon-user"></i><span class="break"></span>Task creation</h2>
            </div>
            <div class="box-content">

                <table class="table">
                    <tbody>
                        <tr>
                            <th>Id</th>
                            <td>{{ entity.id }}</td>
                        </tr>
                        <tr>
                            <th>Name</th>
                            <td>{{ entity.name }}</td>
                        </tr>
                        <tr>
                            <th>Description</th>
                            <td>{{ entity.description|raw }}</td>
                        </tr>
                        <tr>
                            <th>Dateend</th>
                            <td>{{ entity.dateEnd|date('Y-m-d H:i:s') }}</td>
                        </tr>
                    </tbody>
                </table>
                <form class="form-horizontal" action="{{ path('task_add_document', { 'id': entity.id, 'formId': uploadId }) }}" method="post"  >
                    <div class="file-uploader"></div>
                    <div>
                        <button type="submit" class="btn btn-primary">Update Files</button>
                    </div>
                    <div class="form-actions">
                        {% if is_granted('DELETE',entity) %}
                         {% include 'TaskBundle:partials:delete-modal.html.twig' %}
                         <button class="btn btn-danger" type="button" data-target="#deleteModal" data-toggle="modal">
                            Delete
                        </button>

                        {% endif %}
                        {% if is_granted('EDIT',entity) %}
                        <a href="{{ path('task_edit', { 'id': entity.id }) }}" class="btn btn-success">
                            Edit
                        </a>
                        {% endif %}
                        <a class="btn btn-cancel" href="{{ path('task') }}">
                            Back to the list
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="row-fluid sortable">
        <div class="box span12">
            <div class="box-header" data-original-title>
                <h2><i class="icon-user"></i><span class="break"></span>Comentarios</h2>
            </div>
            <div class="box-content">
                {% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': entity.id} %}
            </div>
        </div>
    </div>
    {% endblock %}
    {% block javascripts %}
    {% javascripts
    '@MainBundle/Resources/public/js/vendor/bootstrap-fileupload.js'
    '@MainBundle/Resources/public/js/vendor/jquery.ui.widget.js'
    '@MainBundle/Resources/public/js/vendor/underscore-min.js'
    '@PunkAveFileUploaderBundle/Resources/public/js/jquery.fileupload.js'
    '@FileBundle/Resources/public/js/FileUploader.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {% include 'TaskBundle:partials:taskOp.js.twig' %}
    {% endblock %}